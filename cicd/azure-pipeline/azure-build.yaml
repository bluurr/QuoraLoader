pool:
  vmImage: 'ubuntu-16.04'

variables:
  - group: ci_quora_details

steps:
  ## Maven steps documentation - https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/build/maven?view=azure-devops
  - task: Maven@3
    displayName: 'Verify build (Maven)'
    inputs:
      goals: verify source:jar javadoc:jar
      jdkVersionOption: '1.8'
      testResultsFiles: '**/TEST-*.xml'
    env:
        QUORA_CONTACT: $(quora.contact)
        QUORA_LOGIN_USERNAME: $(quora.login.username)
        QUORA_LOGIN_PASSWORD: $(quora.login.password)

  - task: CopyFiles@2
    displayName: 'Copy jar to staging directory.'
    inputs:
      sourceFolder: '$(Build.SourcesDirectory)/target'
      contents: '*.jar'
      targetFolder: '$(Build.ArtifactStagingDirectory)/target/'

  - publish: '$(Build.ArtifactStagingDirectory)/target/'
    artifact: build
